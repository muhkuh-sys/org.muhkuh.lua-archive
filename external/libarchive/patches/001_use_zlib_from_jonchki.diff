diff -uNr libarchive-3.4.0/CMakeLists.txt libarchive-3.4.0_patched/CMakeLists.txt
--- libarchive-3.4.0/CMakeLists.txt	2019-06-12 23:09:30.000000000 +0200
+++ libarchive-3.4.0_patched/CMakeLists.txt	2019-11-19 08:32:38.026652111 +0100
@@ -405,7 +405,11 @@
 # Find ZLIB
 #
 IF(ENABLE_ZLIB)
-  FIND_PACKAGE(ZLIB)
+  FIND_PACKAGE(net.zlib-zlib REQUIRED CONFIG)
+  GET_TARGET_PROPERTY(ZLIB_LIBRARIES net.zlib-zlib::zlibstatic LOCATION)
+  SET(ZLIB_INCLUDE_DIR ${net.zlib-zlib_INCLUDE_DIR})
+  SET(ZLIB_FOUND TRUE)
+  MESSAGE("Found ZLIB: ${ZLIB_LIBRARIES} (found version ${net.zlib-zlib_VERSION})")
 ELSE()
   SET(ZLIB_FOUND FALSE) # Override cached value
 ENDIF()
